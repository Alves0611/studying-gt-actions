name: ğŸ“¦ Estudando Inputs - Release e Deploy

on:
  workflow_dispatch:
    inputs:
      versao:
        type: string
        required: true
        default: "1.0.0"
        description: "ğŸ“Œ VersÃ£o da nova release"

      numero_card:
        type: number
        required: true
        description: "ğŸ§¾ NÃºmero do card relacionado"

      fazer_deploy:
        type: boolean
        required: true
        default: false
        description: "ğŸš€ Deseja fazer o deploy?"

      ambiente:
        type: choice
        required: true
        default: "dev"
        description: "ğŸŒ Ambiente de deploy"
        options:
          - dev
          - hml
          - prod

jobs:
  imprimir-informacoes:
    name: ğŸ–¨ï¸ Imprimir valores recebidos
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Coletar inputs e definir variÃ¡veis de ambiente
        run: |
          echo "VERSAO=${{ github.event.inputs.versao }}" >> $GITHUB_ENV
          echo "NUMERO_CARD=${{ github.event.inputs.numero_card }}" >> $GITHUB_ENV
          echo "FAZER_DEPLOY=${{ github.event.inputs.fazer_deploy }}" >> $GITHUB_ENV
          echo "AMBIENTE=${{ github.event.inputs.ambiente }}" >> $GITHUB_ENV

      - name: ğŸ“‹ Mostrar todos os valores no log
        run: |
          echo "ğŸ“¦ VersÃ£o: $VERSAO"
          echo "ğŸ“„ NÃºmero do card: $NUMERO_CARD"
          echo "ğŸš€ Fazer deploy? $FAZER_DEPLOY"
          echo "ğŸŒ Ambiente selecionado: $AMBIENTE"

      - name: ğŸš¨ Executar deploy somente se solicitado
        if: env.FAZER_DEPLOY == 'true'
        run: |
          echo "ğŸ”§ Iniciando processo de deploy no ambiente: $AMBIENTE"
